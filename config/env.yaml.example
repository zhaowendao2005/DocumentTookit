# LLM提供商配置
providers:

  - name: "Provider1"
    base_url: "https://your-api-provider.com"
    api_key: "your-api-key-here"
    models:
      - "model-name-1"
      - "model-name-2"

  - name: "Provider2"
    base_url: "https://another-provider.com"
    api_key: "your-second-api-key"
    models:
      - "another-model"

# 目录配置
directories:
  input_dir: "./data/input"
  output_dir: "./data/output"
  temp_dir: "./data/temp"
  candidate_tools_dir: "./sourcefiles"

# 处理模式配置
processing:
  default_mode: "structured"           # classic | structured
  allow_fallback: true                  # 结构化失败是否回退经典
  fallback_mode: "classic"             # 失败回退目标

# 结构化模式配置
structured:
  prompts_root: "./prompts/StructuredFileProcessor"
  default_prompt_version: "Version1"
  max_repair_attempts: 2                # JSON纠错回合上限（0-3）
  force_json_response: false            # 若provider支持，可强制json模式（保留为false）
  schema_path: "./schemas/rows.schema.json"

# 并发控制
concurrency:
  max_concurrent_requests: 30

# 校验配置
validation:
  enable_multiple_requests: true
  request_count: 3
  similarity_threshold: 0.8

# 自动重试配置
retry:
  enable_auto_retry: true
  max_retry_count: 3
  retry_delay_ms: 1000
  retry_on_errors:
    - "rate_limit_exceeded"
    - "server_error"
    - "timeout"
    - "network_error"

# Token统计配置
token_tracking:
  enable_token_counting: true
  show_detailed_stats: true
  save_token_logs: true
  log_file: "./data/logs/token_usage.log"

# 系统提示词文件路径
system_prompt_file: "./prompts/Prompt.txt"

# 网络超时配置
network:
  connect_timeout_ms: 3000
  response_timeout_ms: 60000

# 文本分割工具配置
text_splitter:
  default_source_file: "./data/input/source.txt"
  default_output_dir: "./data/output/split_results"
  default_file_extension: ".txt"
  include_metadata: true
  flatten_structure: false

# Docx转Markdown工具配置
docx_converter:
  default_input_dir: "./data/input"
  default_output_dir: "./data/output"
  default_file_extension: ".md"

# CSV合并工具配置
csv_merger:
  default_input_dir: "./data/output"
  default_output_dir: "./data/output"
  default_output_prefix: "merged"

# 模型测试工具配置
model_tester:
  default_test_prompt: "请简单回复'测试成功'"
  default_response_timeout: 60
  default_connect_timeout: 3000
