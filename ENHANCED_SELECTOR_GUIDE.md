# 增强文件选择器使用指南

## 🎯 新功能概述

我们为您的"文档处理集成工具"添加了强大的增强文件选择功能，现在您可以：

- ✅ **空格键多选**: 使用空格键轻松选择/取消选择文件和目录
- ✅ **目录递归选择**: 选择目录时自动包含该目录下的所有支持文件
- ✅ **实时预览**: 选择目录时显示包含的文件数量
- ✅ **完整文件列表**: 选择完成后显示所有被选中文件的详细列表
- ✅ **智能过滤**: 只显示支持的文件类型（.txt, .md, .docx）

## 🚀 使用方法

### 1. 启动程序

```bash
node main.js
```

### 2. 选择"批量LLM处理"

在主菜单中选择 `🔄 批量LLM处理`

### 3. 选择输入方式

程序会显示三种输入方式：

```
请选择输入方式:
❯ 🎯 增强多选模式（推荐）- 支持空格键选择文件和目录
  📁 传统目录模式 - 选择单个目录处理所有文件  
  📄 传统文件模式 - 手动选择多个文件
```

**推荐选择第一个选项** `🎯 增强多选模式（推荐）`

### 4. 使用增强多选界面

选择增强模式后，会出现如下操作提示：

```
🚀 增强多选模式:
- 使用 ↑↓ 键移动光标
- 使用 空格键 选择/取消选择文件或目录
- 选择目录时会自动包含该目录下的所有支持文件
- 使用 a 键全选，i 键反选
- 按回车键确认选择
```

## 📋 操作详解

### 基本操作

| 按键 | 功能 |
|------|------|
| `↑` `↓` | 移动光标选择项目 |
| `空格` | 选择/取消选择当前项目 |
| `a` | 全选所有项目 |
| `i` | 反选所有项目 |
| `回车` | 确认选择并继续 |

### 选择状态显示

- `◯` - 未选择状态
- `◉` - 已选择状态（绿色高亮）
- `❯` - 当前光标位置（青色高亮）

### 文件类型图标

- 📁 目录
- 📄 `.txt` 文件
- 📝 `.md` 文件
- 📘 `.docx` 文件
- 📊 `.csv` 文件
- 📋 `.json` 文件

## 🎯 核心特性

### 1. 目录递归选择

当您选择一个目录时：
- 程序会自动扫描该目录及所有子目录
- 只包含支持的文件类型（.txt, .md, .docx）
- 实时显示包含的文件数量，如：`📁 documents (15 个文件)`

**示例场景**：
```
选择了目录: /data/input
该目录包含:
  - doc1.txt
  - folder1/doc2.md  
  - folder1/subfolder/doc3.docx
```
选择该目录后，所有3个文件都会被自动包含。

### 2. 混合选择

您可以同时选择：
- 单个文件
- 整个目录
- 多个文件和目录的组合

### 3. 选择确认

选择完成后，程序会显示详细的文件列表：

```
🎯 已选择 8 个文件:
──────────────────────────────────────────────────
  1. 📄 data/input/01 陈佳琦.txt
  2. 📄 data/input/02 洪鹏程.txt  
  3. 📝 data/input/03 花恒春.md
  4. 📘 data/input/04 居乐文.docx
  5. 📄 data/input/05 孙崇杰.txt
  6. 📄 data/input/folder1/doc1.txt
  7. 📝 data/input/folder1/doc2.md
  8. 📘 data/input/folder2/doc3.docx
──────────────────────────────────────────────────
确认选择这些文件？ (Y/n)
```

## 💡 使用技巧

### 1. 快速全选目录
- 如果要处理某个目录下的所有文件，直接选择该目录即可
- 不需要逐个选择文件

### 2. 精确控制
- 如果只想处理特定文件，可以不选择目录，只选择具体文件
- 使用 `i` 键反选来快速调整选择

### 3. 混合策略
- 先选择主要目录，再取消不需要的特定文件
- 或者先选择特定文件，再补充选择目录

### 4. 预览文件数量
- 选择目录时注意查看显示的文件数量
- 确保符合您的预期

## 🔄 与原有功能的兼容

### 传统模式依然可用

如果您习惯原来的选择方式，仍然可以选择：

- **📁 传统目录模式**: 像以前一样选择单个目录
- **📄 传统文件模式**: 使用图形界面选择多个文件

### 无缝切换

在任何时候，您都可以：
- 取消当前选择，重新开始
- 在不同选择模式间切换
- 保持原有的工作流程

## 🎉 实际使用场景

### 场景1: 处理学生作业
```
有这样的目录结构:
/data/input/
  ├── 2025-班级A/
  │   ├── 01 陈佳琦.txt
  │   ├── 02 洪鹏程.txt
  │   └── 03 花恒春.md
  ├── 2025-班级B/
  │   ├── 04 居乐文.docx
  │   └── 05 孙崇杰.txt
  └── 补交作业/
      ├── 迟交1.txt
      └── 迟交2.md
```

**操作步骤**：
1. 选择 `2025-班级A` 目录 ✅
2. 选择 `2025-班级B` 目录 ✅  
3. 不选择 `补交作业` 目录
4. 确认选择

**结果**: 只处理两个班级的正常作业，跳过补交的。

### 场景2: 精确文件选择
```
只想处理特定的几个文件:
- 重要文档1.txt
- 紧急处理.md
- docs/特殊案例.docx
```

**操作步骤**：
1. 在文件列表中找到 `重要文档1.txt`，按空格选择 ✅
2. 找到 `紧急处理.md`，按空格选择 ✅
3. 导航到 `docs` 目录，选择 `特殊案例.docx` ✅
4. 确认选择

## 🛟 故障排除

### 问题1: 选择的目录没有文件
**现象**: 选择目录后显示 "0 个文件"
**原因**: 目录中没有支持的文件类型
**解决**: 检查目录是否包含 .txt, .md, .docx 文件

### 问题2: 无法看到某些文件
**现象**: 预期的文件没有出现在列表中
**原因**: 文件扩展名不在支持列表中
**解决**: 确认文件类型，或者联系管理员添加支持

### 问题3: 选择太多文件
**现象**: 意外选择了大量文件
**原因**: 选择了包含很多文件的大目录
**解决**: 使用 `i` 键反选，或者重新开始选择

## 🎊 总结

这个增强的文件选择器让您的文档处理工作更加高效：

- **更快**: 空格键多选比逐个选择快得多
- **更准**: 可以精确控制要处理的文件
- **更智能**: 目录递归选择自动包含所有相关文件
- **更直观**: 实时显示选择结果和文件数量

立即体验这个强大的新功能，让您的LLM批量处理工作更加轻松！
